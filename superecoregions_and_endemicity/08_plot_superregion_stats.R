library(tidyverse)
library(sf)

load(file = "output/super_ecoregions_results.rda")

# create and index, since there are already files starting with numbering
ind <- 4:(ncol(super_eco) - 2 + 5)

super_eco <- super_eco[,c(1:2, 4:(ncol(super_eco)-1), 3)]
super_eco$area <- as.numeric(super_eco$area)

# add "not defined for regions without samples
load(file = "output/super_region_without_sample.rda")
super_eco <- super_eco %>%
  mutate(super_region = ifelse(super_region %in% ser_with_no_sample$super_region, "not_defined", super_region))

#split of not defined regions
not_defined <- super_eco %>%  filter(super_region == "not_defined")
super_eco <- super_eco %>% filter(super_region != "not_defined")

for(i in c(2:(ncol(super_eco)-1))){
  pdf(paste("output/", ind[i], "_", "superregions_map_", names(super_eco)[i], ".pdf", sep = ""), width = 11, height = 8)
  plo <- ggplot()+
    geom_sf(data = not_defined, fill = "grey", color = "black", size = 0.1)+
    geom_sf(data = super_eco, aes_string(fill = names(super_eco)[i], color =  names(super_eco)[i]))+
    scale_fill_viridis()+
    scale_colour_viridis()+
    ggtitle(names(super_eco)[i])+
    theme_bw()
  print(plo)
  dev.off()
}
